# Spacefile Docs: https://go.deta.dev/docs/spacefile/v0
v: 0
icon: src/assets/icon.png
micros:
  - name: rPlace
    src: .
    engine: python3.9
    primary: true
    include:
      - main.py
      - src/
    run: uvicorn main:app --log-level warning
    dev: uvicorn main:app --reload
    public_routes:
      - '/interactions'
    presets:
      env:
      - name: START
      - name: PASS
      - name: ID
      - name: KEY
      - name: TOKEN
      - name: LOG
      - name: DB
      - name: MAIN
      - name: HOUR
      - name: DAY
      - name: WEEK
      - id: 'snap'
        name: 'Snapshot'
        description: 'Takes global canvas snapshots'
        trigger: 'schedule'
        default_interval: '0 * * * *'
  - name: serve
    src: .
    engine: python3.9
    include: 
      - server.py
      - src/utils/
    run: uvicorn main2:app --log-level warning
    dev: uvicorn main2:app --reload
    presets:
      - name: START
      - name: PASS
      - name: DB
      - name: GLOBAL
      - name: LOCAL
    actions:
      - id: 'check'
        name: 'Check'
        description: 'Checks for logs'
        trigger: 'schedule'
        default_interval: '* * * * *'